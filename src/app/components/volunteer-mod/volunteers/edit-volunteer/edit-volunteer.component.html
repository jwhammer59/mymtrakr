<app-header [title]="headerTitle" [color]="headerColor" [icon]="headerIcon">
</app-header>

<div fxLayout fxLayoutAlign="center center">
  <mat-card>
    <form
      *ngIf="volunteer | async; else loading"
      [formGroup]="volunteerEditForm"
      (ngSubmit)="onSubmit(volunteerEditForm)"
      novalidate
    >
      <div fxLayout="column" fxLayoutAlign="center center">
        <div class="layout">
          <table>
            <tr fxLayout.lt-md="column">
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <input
                    matInput
                    placeholder="First Name"
                    formControlName="firstName"
                  />
                </mat-form-field>
              </td>
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <input
                    matInput
                    placeholder="Last Name"
                    formControlName="lastName"
                  />
                </mat-form-field>
              </td>
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <mat-label>Family ID</mat-label>
                  <mat-select formControlName="familyID">
                    <mat-option [value]="''">--</mat-option>
                    <mat-option
                      *ngFor="let familyId of allFamilyIDs$ | async"
                      [value]="familyId.familyID"
                    >
                      {{ familyId.familyID }}
                    </mat-option>
                  </mat-select>
                  <mat-error>Please enter family ID</mat-error>
                </mat-form-field>
              </td>
            </tr>
          </table>
        </div>
        <div class="layout">
          <mat-form-field fxFlexFill appearance="outline">
            <input matInput placeholder="Address" formControlName="address1" />
          </mat-form-field>
        </div>
        <div class="layout">
          <mat-form-field fxFlexFill appearance="outline">
            <input
              matInput
              placeholder="PO Box, Suite ..."
              formControlName="address2"
            />
          </mat-form-field>
        </div>
        <div class="layout">
          <table>
            <tr fxLayout.lt-md="column">
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <input matInput placeholder="City" formControlName="city" />
                </mat-form-field>
              </td>
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <input matInput placeholder="State" formControlName="state" />
                </mat-form-field>
              </td>
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <input
                    #zip
                    matInput
                    placeholder="Zip"
                    formControlName="zipcode"
                    maxLength="5"
                  />
                  <mat-hint align="end">{{ zip.value.length }}</mat-hint>
                </mat-form-field>
              </td>
            </tr>
          </table>
        </div>
        <div class="layout">
          <table>
            <tr fxLayout.lt-md="column">
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <input matInput placeholder="Email" formControlName="email" />
                  <mat-error>Please enter a valid email address.</mat-error>
                  <mat-hint></mat-hint>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field fxFlexFill appearance="outline">
                  <input
                    #phone
                    matInput
                    placeholder="Phone"
                    formControlName="phone"
                  />
                  <mat-hint align="end">{{ phone.value.length }}</mat-hint>
                </mat-form-field>
              </td>
            </tr>
          </table>
          <mat-divider [inset]="true"></mat-divider>
        </div>
      </div>

      <div fxLayout="column" fxLayoutAlign="center center">
        <div class="layout">
          <h3>Volunteer Status</h3>
          <div class="confirm" fxLayout fxLayoutAlign="space-around">
            <mat-checkbox formControlName="isAvailable"
              >Is Available</mat-checkbox
            >

            <mat-checkbox #isAdmin formControlName="isAdmin"
              >Is Admin</mat-checkbox
            >
          </div>
          <mat-divider [inset]="true"></mat-divider>
          <h3>Volunteer Available Mass Times</h3>
          <div class="confirm" fxLayout fxLayoutAlign="space-around">
            <mat-checkbox formControlName="isSaturday">Saturday</mat-checkbox>
            <mat-checkbox formControlName="isSundayEarly"
              >Sunday Early</mat-checkbox
            >
            <mat-checkbox formControlName="isSundayLate"
              >Sunday Late</mat-checkbox
            >
            <mat-checkbox formControlName="isWeekday">Weekday</mat-checkbox>
          </div>
          <mat-divider [inset]="true"></mat-divider>
          <h3>Volunteer Ministries</h3>
          <div class="confirm" fxLayout fxLayoutAlign="space-around">
            <div fxLayout="column">
              <mat-checkbox formControlName="isCantor">Cantor</mat-checkbox>
              <mat-checkbox formControlName="isLector">Lector</mat-checkbox>
              <mat-checkbox formControlName="isEMoHC">EMoHC</mat-checkbox>
              <mat-checkbox formControlName="isUsher">Usher</mat-checkbox>
            </div>
            <div fxLayout="column">
              <mat-checkbox formControlName="isServer">Server</mat-checkbox>
              <mat-checkbox formControlName="isGifts">Gifts</mat-checkbox>
              <mat-checkbox formControlName="isGiftsChild"
                >Child Gifts</mat-checkbox
              >
              <mat-checkbox formControlName="isRosary">Rosary</mat-checkbox>
            </div>
            <div fxLayout="column">
              <mat-checkbox formControlName="isTech">Technology</mat-checkbox>
              <mat-checkbox formControlName="isOther">Other</mat-checkbox>
              <mat-checkbox formControlName="isMassCoord"
                >Mass Coordinator</mat-checkbox
              >
            </div>
          </div>
        </div>
      </div>

      <div
        class="confirm"
        fxLayout
        fxLayout.lt-md="column"
        fxLayoutAlign="space-evenly"
      >
        <button
          mat-stroked-button
          routerLink="/volunteers"
          color="primary"
          type="button"
        >
          <mat-icon>arrow_back</mat-icon>
          Volunteers
        </button>
        <button mat-stroked-button color="primary" type="submit" value="Submit">
          <mat-icon>save</mat-icon>
          Save
        </button>
        <button
          mat-stroked-button
          routerLink="/volunteers"
          color="warn"
          type="button"
        >
          <mat-icon>cancel</mat-icon>
          Cancel
        </button>
      </div>
    </form>
  </mat-card>
  <ng-template #loading>Loading volunteer...</ng-template>
</div>
